{
    "experiment_name": "v15_replicated",
    "processor": "generic",
    "use_gpu": false,
    "batch_size": 32,
    "epochs": 50,
    "lr": 1e-4,
    "loss_type": "focal",
    "extra_tickers": [
        "XLY",
        "XLP",
        "XLK",
        "XLU"
    ],
    "feature_pipeline": [
        {
            "step": "log_return",
            "input": "underlying_close",
            "output": "log_ret",
            "lags": [
                3,
                5,
                20,
                60
            ]
        },
        {
            "step": "lag_diff",
            "input": "underlying_close",
            "lag": 5,
            "pct_change": true,
            "output": "slope_5d"
        },
        {
            "step": "normalize",
            "columns": [
                "slope_5d"
            ],
            "window": 60,
            "suffix": "_norm"
        },
        {
            "step": "difference",
            "input": "slope_5d",
            "lag": 5,
            "output": "price_accel_5"
        },
        {
            "step": "normalize",
            "columns": [
                "price_accel_5"
            ],
            "window": 60,
            "suffix": "_norm"
        },
        {
            "step": "gap",
            "open_col": "underlying_open",
            "close_col": "underlying_close",
            "output": "gap_raw"
        },
        {
            "step": "normalize",
            "columns": [
                "gap_raw"
            ],
            "window": 60,
            "suffix": ""
        },
        {
            "step": "arithmetic",
            "formula": "gap_raw",
            "output": "gap_norm"
        },
        {
            "step": "technical_indicator",
            "indicator": "rsi",
            "input": "underlying_close",
            "period": 14,
            "output": "rsi"
        },
        {
            "step": "rolling_stat",
            "input": "rsi",
            "window": 3,
            "stat": "mean",
            "output": "rsi_smooth"
        },
        {
            "step": "difference",
            "input": "rsi_smooth",
            "lag": 5,
            "output": "rsi_slope_5"
        },
        {
            "step": "technical_indicator",
            "indicator": "atr",
            "period": 14,
            "output": "atr"
        },
        {
            "step": "lag_diff",
            "input": "vix",
            "lag": 5,
            "pct_change": true,
            "output": "vix_slope_5"
        },
        {
            "step": "difference",
            "input": "vix_slope_5",
            "lag": 5,
            "output": "vix_accel_5"
        },
        {
            "step": "normalize",
            "columns": [
                "vix"
            ],
            "window": 60,
            "suffix": "_norm"
        },
        {
            "step": "arithmetic",
            "formula": "(atr / underlying_close) * 15.8745",
            "output": "iv"
        },
        {
            "step": "normalize",
            "columns": [
                "iv"
            ],
            "window": 60,
            "suffix": "_norm"
        },
        {
            "step": "greeks",
            "col_S": "underlying_close",
            "col_K": "underlying_close",
            "col_r": "us_treasury_10y",
            "col_sigma": "iv"
        },
        {
            "step": "arithmetic",
            "formula": "xly / (xlp + 1e-6)",
            "output": "ratio_consumer"
        },
        {
            "step": "arithmetic",
            "formula": "xlk / (xlu + 1e-6)",
            "output": "ratio_tech_util"
        },
        {
            "step": "normalize",
            "columns": [
                "ratio_consumer",
                "ratio_tech_util"
            ],
            "window": 60,
            "suffix": "_norm"
        }
    ],
    "dynamic_columns": [
        "log_ret",
        "log_ret_3",
        "log_ret_5",
        "log_ret_20",
        "log_ret_60",
        "slope_5d_norm",
        "price_accel_5_norm",
        "gap_norm",
        "rsi_smooth",
        "rsi_slope_5",
        "delta",
        "gamma",
        "theta",
        "vega",
        "iv_norm",
        "rsi",
        "vix_norm",
        "vix_slope_5",
        "vix_accel_5",
        "ratio_consumer_norm",
        "ratio_tech_util_norm"
    ],
    "static_columns": [
        "strike_distance",
        "dte_normalized",
        "is_call",
        "moneyness"
    ],
    "targets": [
        {
            "name": "target_1",
            "input": "underlying_close",
            "horizon": 5,
            "type": "log_future_return"
        },
        {
            "name": "target_2",
            "input": "underlying_close",
            "horizon": 21,
            "type": "log_future_return"
        }
    ],
    "lookback_window": 60,
    "target_col": "log_ret"
}